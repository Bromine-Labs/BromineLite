<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bromine Lite Launcher</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-HRDYMXXKQ9"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-HRDYMXXKQ9');
</script>

    <style>
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .fade-in { animation: fadeIn 0.3s ease-out; }
    </style>
  </head>
  <body class="bg-gradient-to-br from-gray-900 via-gray-800 to-indigo-950 min-h-screen flex flex-col items-center p-6 gap-8 text-gray-100">
    
    <header class="text-center fade-in">
      <h1 class="text-4xl md:text-5xl font-bold bg-gradient-to-r from-indigo-400 via-purple-400 to-pink-400 bg-clip-text text-transparent mb-2">
        Bromine Lite Launcher
      </h1>
      <p class="text-gray-300 text-sm">Vibe coded Bromine Lite data URI generator</p>
    </header>

    <main class="w-full max-w-4xl">
      <div id="btns" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 justify-center">Loading...</div>
    </main>

    <div class="w-full max-w-2xl fade-in">
      <label for="uri" class="block text-sm font-medium text-gray-300 mb-2">Launch URI</label>
      <div class="relative">
        <input id="uri" type="text" readonly placeholder="Paste the URL here or click a button above"
          class="w-full p-3 pr-20 font-mono bg-gray-800 border-2 border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-gray-100 placeholder-gray-400 shadow-sm">
        <button id="copyBtn" onclick="copyToClipboard()" 
          class="absolute right-2 top-1/2 transform -translate-y-1/2 px-3 py-1 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors text-sm font-medium">
          <i class="fas fa-copy mr-1"></i>Copy
        </button>
      </div>
    </div>

    <script defer async>
      (async () => {
        const btnContainer = document.getElementById('btns');
        const output = document.getElementById('uri');
        btnContainer.innerHTML = '<div class="col-span-full text-center py-8"><i class="fas fa-spinner fa-spin text-2xl text-indigo-400 mb-2"></i><p class="text-gray-300">Loading demos...</p></div>';

        try {
          const res = await fetch('https://api.github.com/repos/Bromine-Labs/BromineLite/contents/?ref=main');

          const files = await res.json();
          const htmls = files.filter(file => file.name.endsWith('.html') && file.name !== 'index.html');

          if (htmls.length === 0) {
            btnContainer.innerHTML = '<p class="col-span-full text-center text-gray-400">No demos found.</p>';
            return;
          }

          btnContainer.innerHTML = '';

          htmls.forEach((file, index) => {
            let name = file.name.replace('.html', '').replace(/_/g, ' ');
            name = name.replace(/\b\w/g, c => c.toUpperCase());

            const btn = document.createElement('button');
            btn.innerHTML = `<i class="fas fa-rocket mb-2 text-indigo-400"></i><div class="text-gray-100">${name}</div>`;
            btn.className = 'group flex flex-col items-center p-4 bg-gray-800 rounded-xl shadow-md hover:shadow-lg border border-gray-600 hover:border-indigo-500 transition-all duration-200 fade-in hover:scale-105 text-gray-100';

            btn.addEventListener('click', async () => {
              try {
                btn.classList.add('loading');
                btn.innerHTML = '<i class="fas fa-spinner fa-spin mb-2 text-indigo-400"></i><div class="text-gray-300">Loading...</div>';
                const res = await fetch(file.download_url);
                if (!res.ok) throw new Error('Could not fetch file');
                const text = await res.text();
                const encoded = btoa(unescape(encodeURIComponent(text)));
                output.value = 'data:text/html;base64,' + encoded;
                output.classList.add('ring-2', 'ring-green-500');
                setTimeout(() => output.classList.remove('ring-2', 'ring-green-500'), 2000);
                btn.classList.remove('loading');
                btn.innerHTML = '<i class="fas fa-check text-green-500 mb-2"></i><div class="text-green-400">Loaded!</div>';
                setTimeout(() => {
                  btn.innerHTML = `<i class="fas fa-rocket mb-2 text-indigo-400"></i><div class="text-gray-100">${name}</div>`;
                }, 1500);
              } catch(err) {
                alert('Error: ' + err.message);
                btn.classList.remove('loading');
                btn.innerHTML = `<i class="fas fa-rocket mb-2 text-indigo-400"></i><div class="text-gray-100">${name}</div>`;
              }
            });

            // Staggered animation
            setTimeout(() => btnContainer.appendChild(btn), index * 100);
          });

        } catch(err) {
          btnContainer.innerHTML = `<p class="col-span-full text-center text-red-400"><i class="fas fa-exclamation-triangle mr-2"></i>Error: ${err.message}</p>`;
        }
      })();

      function copyToClipboard() {
        const uri = document.getElementById('uri');
        uri.select();
        document.execCommand('copy');
        const btn = document.getElementById('copyBtn');
        const originalText = btn.innerHTML;
        btn.innerHTML = '<i class="fas fa-check mr-1"></i>Copied!';
        btn.classList.add('bg-green-600');
        setTimeout(() => {
          btn.innerHTML = originalText;
          btn.classList.remove('bg-green-600');
        }, 2000);
      }
    </script>

  </body>
</html>
