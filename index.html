<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bromine's gmes page</title>

    <!-- Tailwind + Phosphor -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/regular/style.css"
    />

    <style type="text/tailwindcss">
			@theme {
			  --font-display: Helvetica, sans-serif;
			
			  --color-base: #191724;
			  --color-surface: #1f1d2e;
			  --color-overlay: #26233a;
			  --color-muted: #6e6a86;
			  --color-subtle: #908caa;
			  --color-text: #e0def4;
			  --color-love: #eb6f92;
			  --color-gold: #f6c177;
			  --color-rose: #ebbcba;
			  --color-pine: #31748f;
			  --color-foam: #9ccfd8;
				--color-iris: #c4a7e7;
				--color-highlight-low: #21202e;
				--color-highlight-med: #403d52;
				--color-highlight-high: #524f67;
			}

			::selection {
				background-color: #403d52;
			}

			::-moz-selection {
				background-color: #403d52;
			}

			h1 {
				@apply text-2xl;
			}

			h2 {
				@apply text-xl;
			}

			h3 {
				@apply text-lg;
			}

			label {
				@apply text-xs text-text font-medium;
			}

			button {
				transition: transform 0.2s ease-in-out;
			}

			button:hover {
				transform: scale(1.1) translateY(-2px);
			}

			button:active {
				transform: scale(0.95);
			}

			[data-icon] {
			  stroke-width: 3;
			}
    </style>
  </head>

  <body class="flex bg-base text-text">
    <main class="flex flex-col flex-grow min-h-screen" id="main">
      <div class="flex w-full backdrop-blur justify-center py-3 shadow-md sticky top-0 z-50">
        <input
          class="bg-surface px-4 py-2 rounded-md focus:outline-none shadow text-text w-1/2"
          id="search"
          placeholder="Search games..."
          type="text"
        />
      </div>

      <section id="gmeContainer" class="flex flex-wrap justify-center gap-3 p-4">
        <p>Loading games...</p>
      </section>
			<div id="gmePageContainer" class="fixed inset-0 z-[999] bg-surface/90 hidden">
			  <!-- Title -->
			  <h2 id="gmePageTitle" class="absolute top-[15px] left-[20px] text-3xl font-bold text-white z-50"></h2>
			
			  <!-- Close Button -->
			  <button id="backBtn" class="absolute top-[15px] right-[20px] flex items-center px-4 py-2 rounded-lg bg-highlight-med/70 text-white border-0 cursor-pointer hover:bg-highlight-high/70 z-50 transition">
			    <svg class="size-5" data-icon="ph:x" height="1em" width="1em" aria-hidden="true">
			      <symbol id="ai-ph-x" viewBox="0 0 256 256">
			        <path fill="currentColor" d="M205.66 194.34a8 8 0 0 1-11.32 11.32L128 139.31l-66.34 66.35a8 8 0 0 1-11.32-11.32L116.69 128L50.34 61.66a8 8 0 0 1 11.32-11.32L128 116.69l66.34-66.35a8 8 0 0 1 11.32 11.32L139.31 128Z"/>
			      </symbol>
			      <use href="#ai-ph-x"></use>
			    </svg>
			    Close
			  </button>
			
			  <!-- Game iframe -->
			  <iframe id="gmePageFrame" class="absolute top-0 left-0 w-full h-full border-none" allowfullscreen></iframe>
			</div>

    </main>



    <script type="module">
      async function loadGames() {
        try {
          const res = await fetch(
            "https://cdn.jsdelivr.net/gh/bromine-labs/bromine@main/src/assets/gmes.json"
          );
          const data = await res.json();
          window.gmesData = data;
          renderGames(data);
        } catch (e) {
          console.error("Failed to load JSON:", e);
          document.getElementById("gmeContainer").innerHTML =
            "<p style='color:red;'>Failed to load games.</p>";
        }
      }

      const container = document.getElementById("gmeContainer");
      const searchInput = document.getElementById("search");

      function renderGames(games) {
        container.innerHTML = games
          .map(
            (game) => `
          <div
            onclick="openGme('${game.alt}', '${game.title}', '${game.frame}')"
            class="bg-surface border border-overlay rounded-xl p-3 m-2 w-64 text-center shadow-sm hover:scale-105 transition-transform cursor-pointer"
          >
            <h3 class="mt-2 font-medium text-text truncate">${game.title}</h3>
          </div>
        `
          )
          .join("");
      }

      searchInput.addEventListener("input", (e) => {
        const q = e.target.value.toLowerCase();
        const filtered = window.gmesData.filter((g) =>
          g.title.toLowerCase().includes(q)
        );
        renderGames(filtered);
      });

      window.openGme = (alt, title, frame) => {
        const iframe = document.getElementById("gmePageFrame");
        const container = document.getElementById("gmePageContainer");
        iframe.src = `https://raw.githack.com/Bromine-Labs/asseting-bromine/main/${alt}`;
        container.classList.remove("hidden")
        document.body.style.overflow = "hidden";
      };

      window.closeGme = () => {
        const container = document.getElementById("gmePageContainer");
        const iframe = document.getElementById("gmePageFrame");
        iframe.src = "";
        container.classList.add("hidden");
        document.body.style.overflow = "";
      };

      loadGames();
      		document.getElementById("backBtn").addEventListener("click", () => {
			closeGme();
		})

    </script>
  </body>
</html>
